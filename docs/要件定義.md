承知いたしました。6歳のお子様が分数の概念を楽しく学べるゲームの要件定義を作成します。いただいたご要望を基に、具体的な仕様や実装のヒントを加えて整理しました。

---

## 🎮 分数学習ゲーム 要件定義書

### 1. ゲームの目的とコンセプト

* **目的**: 小学校入学前のお子様が、**分数の大きさ**や**量のイメージ**を直感的に理解し、算数への興味を持つきっかけを作ること。
* **コンセプト**: 「見てわかる、さわって楽しい！」をテーマに、ケーキやジュースなど身近なものを題材にしたカードゲームで、コンピューターと対戦しながら楽しく分数を学ぶ。

---

### 2. ターゲットユーザー

* **年齢**: 6歳（小学校入学前）
* **スキル**:
    * ひらがなが読める。
    * 1から10までの数字がわかる。
    * 簡単なタップやドラッグ操作ができる。

---

### 3. ゲームの主な流れ

1.  **タイトル画面**
    * ゲームのタイトルと「すたーと」ボタンが表示される。
2.  **レベル選択画面**
    * 「かんたん」「ふつう」「むずかしい」の3つのレベルから遊びたいものを選ぶ。
3.  **ゲーム画面**
    * **5問固定**で問題が出題され、カードをタップして回答する。
    * 正解・不正解がすぐにアニメーションで表示される。
    * **時間制限なし**でプレッシャーを軽減し、じっくり考えられる。
    * **2段階ヒントシステム**：最初は数字のみ、10秒後にボタンで絵を表示可能。
4.  **結果画面**
    * 5問完了後、スコア・正答率・総回答時間・間違えた問題の振り返りが表示される。

---

### 4. 各画面の詳細仕様

#### 4.1. タイトル画面
* **表示項目**:
    * ゲームタイトル案: 『わけっこマスター』『分数ケーキやさん』
    * 「すたーと」ボタン
    * 簡単な遊び方の説明（例：「おおきいほうの かーどを えらんでね！」）
* **アクション**: 「すたーと」ボタンをタップすると、レベル選択画面に移動する。

#### 4.2. レベル選択画面
* **表示項目**:
    * 「れべるを えらんでね」というメッセージ
    * レベル選択ボタン
        * **かんたん**: 分母が2, 3, 4の分数が中心。
        * **ふつう**: 分母が6, 8までの分数が登場。「おなじ おおきさ」を探す問題も追加。
        * **むずかしい**: 分母が10, 12まで登場。スピードが速くなる。
* **アクション**: レベルのボタンをタップすると、ゲーム画面に移動してゲームが開始される。

#### 4.3. ゲーム画面
* **レイアウト**:
    * **上部**: 現在のスコア、問題番号（○/5）、正解数を表示するヘッダー
    * **中央上**: 問題文エリア（例：「おおきいのは どっち？」）
    * **中央**: 2〜3枚の「分数カード」が表示される選択肢エリア
    * **下部**: ヒントボタンとゲーム終了ボタン
* **分数カードのデザイン**:
    * **2段階表示システム**:
        * **初期状態**: 分数の数字（例：「1/2」）のみ表示、絵は「?」で隠す
        * **ヒント使用後**: 問題開始から10秒後にヒントボタンが有効化され、押すと絵が表示される
    * **絵の種類**:
        * 円グラフ（ケーキやピザの切り分け）
        * 長方形の分割（チョコレートバーなど）
        * コップに入ったジュースの量
* **ゲームの進行**:
    1.  問題文と複数の分数カードが表示される（数字のみ、絵は隠れている）。
    2.  10秒経過後、「ヒントを表示」ボタンが有効化される。
    3.  プレイヤーはヒントを使うか判断し、正解だと思うカードをタップする。
    4.  正解・不正解が即座にアニメーションで通知される。
        * **正解**: カードが緑色に光り、大きな◯が表示される。
        * **不正解**: カードが赤色に光り、小さな✗が表示される。
    5.  1.5秒後に自動的に次の問題へ進む。
    6.  **5問完了**で自動的に結果画面に移動する。

#### 4.4. 結果画面
* **表示項目**:
    * 「ゲーム終了」というメッセージ
    * **詳細な成績表示**:
        * 最終スコア（例：「15てん！」）
        * 正解数（例：「4/5もん せいかい！」）
        * 正答率（例：「80%」）
        * **総回答時間**（例：「45びょう」）
    * 成績に応じた褒め言葉（例：「すごい！」「よくがんばったね！」）
    * **間違えた問題の振り返りセクション**:
        * 間違えた問題を再表示
        * 正解と自分の回答を比較表示
        * ヒント付きで学習をサポート
    * 「もう一回」ボタン（レベル選択画面に戻る）
    * 「タイトルへ」ボタン（タイトル画面に戻る）

---

### 5. ゲームの問題（ロジック）の例

#### レベル：かんたん
* **大きさ比べ**: 「1/2」と「1/3」のカードが出てきて、「おおきいのは どっち？」と問われる。
* **仲間はずれ**: 「1/2」「1/2」「1/4」のカードが出てきて、「ちがうのは どれ？」と問われる。

#### レベル：ふつう
* **同じもの探し**: 「1/2」という記号カードと、「2/4」の絵のカードが出てきて、「おなじ おおきさは どれ？」と問われる。
* **足し算のイメージ**: 「1/4のケーキ」と「1/4のケーキ」の絵を合わせると、どのカードと同じになるかを選ばせる。（選択肢に「1/2のケーキ」のカードがある）

---

### 6. UI/UXデザインのポイント

* **文字**: 子供向けの丸ゴシック体など、読みやすいフォントを使用する。**すべての漢字とカタカナにふりがなを振る**。**小学2年生レベルの国語力**を想定し、子供扱いしない適度な漢字使用。
* **色彩**: 
    * 明るく、彩度の高い色を基本とし、子供の注意を引く配色にする。
    * **文字の視認性向上**: 黒背景ではなく白背景を使用し、青系の文字色で見やすく表示。
* **プレッシャー軽減の工夫**:
    * **時間制限を撤廃**し、じっくり考えられる環境を提供。
    * **段階的学習支援**で無理なく理解を深められる。
* **アニメーション**:
    * カードをタップした時の反応（少し大きくなるなど）を付ける。
    * 正解時・不正解時の視覚的フィードバック（緑・赤の境界線表示）。
    * **過度にうるさくない**適度なアニメーションで集中を妨げない。
* **学習支援機能**:
    * **2段階ヒントシステム**で段階的に理解をサポート。
    * **振り返り機能**で間違えた問題を復習可能。

---

### 7. 技術要件

* **開発技術スタック**: 
    * **フロントエンド**: React 18 + Next.js 14 (App Router) + TypeScript
    * **スタイリング**: Tailwind CSS + Framer Motion（適度なアニメーション）
    * **状態管理**: Zustand
    * **デプロイ**: Vercel (SSG: Static Site Generation)
* **バックエンド（将来拡張用）**: 
    * **データベース**: Supabase（認証・データ保存）
    * **音声生成**: AI音声生成サービス
* **実行環境**: PC、スマートフォン、タブレットのウェブブラウザ
* **コスト要件**: **完全無料**での実装・運用

---

### 8. 実装で得られた改善点（2025年8月更新）

* **時間プレッシャーの排除**: 制限時間をなくすことで、子供が安心して学習に集中できる環境を実現。
* **段階的学習支援**: 数字のみ→絵の表示という2段階システムで、理解度に応じた学習が可能。
* **明確な進捗表示**: 5問固定・問題カウンターで子供にも分かりやすい進行状況。
* **振り返り学習**: 間違えた問題の詳細表示で復習効果を向上。
* **視認性の向上**: 白背景・青文字で文字が見やすく、学習に集中しやすい画面設計。

この要件定義を基に、プロトタイプから本格実装まで段階的に開発を進め、ユーザーフィードバックを反映しながら継続的に改善していくことが重要です。